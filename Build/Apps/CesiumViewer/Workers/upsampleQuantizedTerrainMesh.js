/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2014 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
/**
@license
mersenne-twister.js - https://gist.github.com/banksean/300494

   Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:

     1. Redistributions of source code must retain the above copyright
        notice, this list of conditions and the following disclaimer.

     2. Redistributions in binary form must reproduce the above copyright
        notice, this list of conditions and the following disclaimer in the
        documentation and/or other materials provided with the distribution.

     3. The names of its contributors may not be used to endorse or promote
        products derived from this software without specific prior written
        permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
   "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
   LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
   A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

!function(){define("Core/defined",[],function(){"use strict";var e=function(e){return void 0!==e};return e}),define("Core/freezeObject",["./defined"],function(e){"use strict";var t=Object.freeze;return e(t)||(t=function(e){return e}),t}),define("Core/defaultValue",["./freezeObject"],function(e){"use strict";var t=function(e,t){return void 0!==e?e:t};return t.EMPTY_OBJECT=e({}),t}),define("Core/DeveloperError",["./defined"],function(e){"use strict";var t=function(e){this.name="DeveloperError",this.message=e;var t;try{throw new Error}catch(n){t=n.stack}this.stack=t};return t.prototype.toString=function(){var t=this.name+": "+this.message;return e(this.stack)&&(t+="\n"+this.stack.toString()),t},t.throwInstantiationError=function(){throw new t("This function defines an interface and should not be called directly.")},t}),define("Core/Cartesian3",["./defaultValue","./defined","./DeveloperError","./freezeObject"],function(e,t,n,r){"use strict";var i=function(t,n,r){this.x=e(t,0),this.y=e(n,0),this.z=e(r,0)};i.fromSpherical=function(n,r){t(r)||(r=new i);var a=n.clock,o=n.cone,u=e(n.magnitude,1),s=u*Math.sin(o);return r.x=s*Math.cos(a),r.y=s*Math.sin(a),r.z=u*Math.cos(o),r},i.fromElements=function(e,n,r,a){return t(a)?(a.x=e,a.y=n,a.z=r,a):new i(e,n,r)},i.clone=function(e,n){return t(e)?t(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n):new i(e.x,e.y,e.z):void 0},i.fromCartesian4=i.clone,i.packedLength=3,i.pack=function(t,n,r){r=e(r,0),n[r++]=t.x,n[r++]=t.y,n[r]=t.z},i.unpack=function(n,r,a){return r=e(r,0),t(a)||(a=new i),a.x=n[r++],a.y=n[r++],a.z=n[r],a},i.fromArray=i.unpack,i.getMaximumComponent=function(e){return Math.max(e.x,e.y,e.z)},i.getMinimumComponent=function(e){return Math.min(e.x,e.y,e.z)},i.getMinimumByComponent=function(e,n,r){return t(r)||(r=new i),r.x=Math.min(e.x,n.x),r.y=Math.min(e.y,n.y),r.z=Math.min(e.z,n.z),r},i.getMaximumByComponent=function(e,n,r){return t(r)||(r=new i),r.x=Math.max(e.x,n.x),r.y=Math.max(e.y,n.y),r.z=Math.max(e.z,n.z),r},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var a=new i;i.distance=function(e,t){return i.subtract(e,t,a),i.magnitude(a)},i.normalize=function(e,n){var r=i.magnitude(e);return t(n)?(n.x=e.x/r,n.y=e.y/r,n.z=e.z/r,n):new i(e.x/r,e.y/r,e.z/r)},i.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},i.multiplyComponents=function(e,n,r){return t(r)?(r.x=e.x*n.x,r.y=e.y*n.y,r.z=e.z*n.z,r):new i(e.x*n.x,e.y*n.y,e.z*n.z)},i.add=function(e,n,r){return t(r)?(r.x=e.x+n.x,r.y=e.y+n.y,r.z=e.z+n.z,r):new i(e.x+n.x,e.y+n.y,e.z+n.z)},i.subtract=function(e,n,r){return t(r)?(r.x=e.x-n.x,r.y=e.y-n.y,r.z=e.z-n.z,r):new i(e.x-n.x,e.y-n.y,e.z-n.z)},i.multiplyByScalar=function(e,n,r){return t(r)?(r.x=e.x*n,r.y=e.y*n,r.z=e.z*n,r):new i(e.x*n,e.y*n,e.z*n)},i.divideByScalar=function(e,n,r){return t(r)?(r.x=e.x/n,r.y=e.y/n,r.z=e.z/n,r):new i(e.x/n,e.y/n,e.z/n)},i.negate=function(e,n){return t(n)?(n.x=-e.x,n.y=-e.y,n.z=-e.z,n):new i(-e.x,-e.y,-e.z)},i.abs=function(e,n){return t(n)?(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n):new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z))};var o=new i;i.lerp=function(e,t,n,r){return i.multiplyByScalar(t,n,o),r=i.multiplyByScalar(e,1-n,r),i.add(o,r,r)};var u=new i,s=new i;i.angleBetween=function(e,t){i.normalize(e,u),i.normalize(t,s);var n=i.dot(u,s),r=i.magnitude(i.cross(u,s,u));return Math.atan2(r,n)};var c=new i;return i.mostOrthogonalAxis=function(e,t){var n=i.normalize(e,c);return i.abs(n,n),t=n.x<=n.y?n.x<=n.z?i.clone(i.UNIT_X,t):i.clone(i.UNIT_Z,t):n.y<=n.z?i.clone(i.UNIT_Y,t):i.clone(i.UNIT_Z,t)},i.equals=function(e,n){return e===n||t(e)&&t(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z},i.equalsEpsilon=function(e,n,r){return e===n||t(e)&&t(n)&&Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r&&Math.abs(e.z-n.z)<=r},i.cross=function(e,n,r){var a=e.x,o=e.y,u=e.z,s=n.x,c=n.y,l=n.z,h=o*l-u*c,f=u*s-a*l,d=a*c-o*s;return t(r)?(r.x=h,r.y=f,r.z=d,r):new i(h,f,d)},i.ZERO=r(new i(0,0,0)),i.UNIT_X=r(new i(1,0,0)),i.UNIT_Y=r(new i(0,1,0)),i.UNIT_Z=r(new i(0,0,1)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},i}),define("ThirdParty/mersenne-twister",[],function(){var e=function(e){void 0==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)};return e.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},e.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_genrand(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=2636928640&e<<7,e^=4022730752&e<<15,e^=e>>>18,e>>>0},e.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},e}),define("Core/Math",["./defaultValue","./defined","./DeveloperError","../ThirdParty/mersenne-twister"],function(e,t,n,r){"use strict";var i={};i.EPSILON1=.1,i.EPSILON2=.01,i.EPSILON3=.001,i.EPSILON4=1e-4,i.EPSILON5=1e-5,i.EPSILON6=1e-6,i.EPSILON7=1e-7,i.EPSILON8=1e-8,i.EPSILON9=1e-9,i.EPSILON10=1e-10,i.EPSILON11=1e-11,i.EPSILON12=1e-12,i.EPSILON13=1e-13,i.EPSILON14=1e-14,i.EPSILON15=1e-15,i.EPSILON16=1e-16,i.EPSILON17=1e-17,i.EPSILON18=1e-18,i.EPSILON19=1e-19,i.EPSILON20=1e-20,i.GRAVITATIONALPARAMETER=3986004418e5,i.SOLAR_RADIUS=6955e5,i.LUNAR_RADIUS=1737400,i.SIXTY_FOUR_KILOBYTES=65536,i.sign=function(e){return e>0?1:0>e?-1:0},i.sinh=function(e){var t=Math.pow(Math.E,e),n=Math.pow(Math.E,-1*e);return.5*(t-n)},i.cosh=function(e){var t=Math.pow(Math.E,e),n=Math.pow(Math.E,-1*e);return.5*(t+n)},i.lerp=function(e,t,n){return(1-n)*e+n*t},i.PI=Math.PI,i.ONE_OVER_PI=1/Math.PI,i.PI_OVER_TWO=.5*Math.PI,i.PI_OVER_THREE=Math.PI/3,i.PI_OVER_FOUR=Math.PI/4,i.PI_OVER_SIX=Math.PI/6,i.THREE_PI_OVER_TWO=.5*3*Math.PI,i.TWO_PI=2*Math.PI,i.ONE_OVER_TWO_PI=1/(2*Math.PI),i.RADIANS_PER_DEGREE=Math.PI/180,i.DEGREES_PER_RADIAN=180/Math.PI,i.RADIANS_PER_ARCSECOND=i.RADIANS_PER_DEGREE/3600,i.toRadians=function(e){return e*i.RADIANS_PER_DEGREE},i.toDegrees=function(e){return e*i.DEGREES_PER_RADIAN},i.convertLongitudeRange=function(e){var t=i.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n},i.negativePiToPi=function(e){for(var t=i.EPSILON10,n=i.PI,r=i.TWO_PI;-(n+t)>e;)e+=r;if(-n>e)return-n;for(;e>n+t;)e-=r;return e>n?n:e},i.zeroToTwoPi=function(e){var t=e%i.TWO_PI;return 0>t?(t+i.TWO_PI)%i.TWO_PI:t},i.equalsEpsilon=function(t,n,r){return r=e(r,0),Math.abs(t-n)<=r};var a=[1];i.factorial=function(e){var t=a.length;if(e>=t)for(var n=a[t-1],r=t;e>=r;r++)a.push(n*r);return a[e]},i.incrementWrap=function(t,n,r){return r=e(r,0),++t,t>n&&(t=r),t},i.isPowerOfTwo=function(e){return 0!==e&&0===(e&e-1)},i.nextPowerOfTwo=function(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e},i.clamp=function(e,t,n){return t>e?t:e>n?n:e};var o=new r;return i.setRandomNumberSeed=function(e){o=new r(e)},i.nextRandomNumber=function(){return o.random()},i}),define("Core/Cartographic",["./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,n,r,i){"use strict";var a=function(t,n,r){this.longitude=e(t,0),this.latitude=e(n,0),this.height=e(r,0)};return a.fromDegrees=function(n,r,o,u){return n=i.toRadians(e(n,0)),r=i.toRadians(e(r,0)),o=e(o,0),t(u)?(u.longitude=n,u.latitude=r,u.height=o,u):new a(n,r,o)},a.clone=function(e,n){return t(e)?t(n)?(n.longitude=e.longitude,n.latitude=e.latitude,n.height=e.height,n):new a(e.longitude,e.latitude,e.height):void 0},a.equals=function(e,n){return e===n||t(e)&&t(n)&&e.longitude===n.longitude&&e.latitude===n.latitude&&e.height===n.height},a.equalsEpsilon=function(e,n,r){return e===n||t(e)&&t(n)&&Math.abs(e.longitude-n.longitude)<=r&&Math.abs(e.latitude-n.latitude)<=r&&Math.abs(e.height-n.height)<=r},a.toString=function(e){return"("+e.longitude+", "+e.latitude+", "+e.height+")"},a.ZERO=r(new a(0,0,0)),a.prototype.clone=function(e){return a.clone(this,e)},a.prototype.equals=function(e){return a.equals(this,e)},a.prototype.equalsEpsilon=function(e,t){return a.equalsEpsilon(this,e,t)},a.prototype.toString=function(){return a.toString(this)},a}),define("Core/defineProperties",["./defined"],function(e){"use strict";var t=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),n=Object.defineProperties;return t&&e(n)||(n=function(e){return e}),n}),define("Core/Ellipsoid",["./freezeObject","./defaultValue","./defined","./defineProperties","./DeveloperError","./Math","./Cartesian3","./Cartographic"],function(e,t,n,r,i,a,o,u){"use strict";var s=function(e,n,r){e=t(e,0),n=t(n,0),r=t(r,0),this._radii=new o(e,n,r),this._radiiSquared=new o(e*e,n*n,r*r),this._radiiToTheFourth=new o(e*e*e*e,n*n*n*n,r*r*r*r),this._oneOverRadii=new o(0===e?0:1/e,0===n?0:1/n,0===r?0:1/r),this._oneOverRadiiSquared=new o(0===e?0:1/(e*e),0===n?0:1/(n*n),0===r?0:1/(r*r)),this._minimumRadius=Math.min(e,n,r),this._maximumRadius=Math.max(e,n,r),this._centerToleranceSquared=a.EPSILON1};r(s.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),s.clone=function(e,t){if(!n(e))return void 0;var r=e._radii;return n(t)?(o.clone(r,t._radii),o.clone(e._radiiSquared,t._radiiSquared),o.clone(e._radiiToTheFourth,t._radiiToTheFourth),o.clone(e._oneOverRadii,t._oneOverRadii),o.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new s(r.x,r.y,r.z)},s.fromCartesian3=function(e){return n(e)?new s(e.x,e.y,e.z):new s},s.WGS84=e(new s(6378137,6378137,6356752.314245179)),s.UNIT_SPHERE=e(new s(1,1,1)),s.MOON=e(new s(a.LUNAR_RADIUS,a.LUNAR_RADIUS,a.LUNAR_RADIUS)),s.prototype.clone=function(e){return s.clone(this,e)},s.prototype.geocentricSurfaceNormal=o.normalize,s.prototype.geodeticSurfaceNormalCartographic=function(e,t){var r=e.longitude,i=e.latitude,a=Math.cos(i),u=a*Math.cos(r),s=a*Math.sin(r),c=Math.sin(i);return n(t)||(t=new o),t.x=u,t.y=s,t.z=c,o.normalize(t,t)},s.prototype.geodeticSurfaceNormal=function(e,t){return t=o.multiplyComponents(e,this._oneOverRadiiSquared,t),o.normalize(t,t)};var c=new o,l=new o;s.prototype.cartographicToCartesian=function(e,t){var n=c,r=l;this.geodeticSurfaceNormalCartographic(e,n),o.multiplyComponents(this._radiiSquared,n,r);var i=Math.sqrt(o.dot(n,r));return o.divideByScalar(r,i,r),o.multiplyByScalar(n,e.height,n),o.add(r,n,t)},s.prototype.cartographicArrayToCartesianArray=function(e,t){var r=e.length;n(t)?t.length=r:t=new Array(r);for(var i=0;r>i;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};var h=new o,f=new o,d=new o;s.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,f);if(!n(r))return void 0;var i=this.geodeticSurfaceNormal(r,h),s=o.subtract(e,r,d),c=Math.atan2(i.y,i.x),l=Math.asin(i.z),p=a.sign(o.dot(s,e))*o.magnitude(s);return n(t)?(t.longitude=c,t.latitude=l,t.height=p,t):new u(c,l,p)},s.prototype.cartesianArrayToCartographicArray=function(e,t){var r=e.length;n(t)?t.length=r:t=new Array(r);for(var i=0;r>i;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t};var p=new o,m=new o;return s.prototype.scaleToGeodeticSurface=function(e,t){var r=e.x,i=e.y,u=e.z,s=this._oneOverRadii,c=s.x,l=s.y,h=s.z,f=r*r*c*c,d=i*i*l*l,y=u*u*h*h,x=f+d+y,v=Math.sqrt(1/x),w=o.multiplyByScalar(e,v,p);if(x<this._centerToleranceSquared)return isFinite(v)?o.clone(w,t):void 0;var g=this._oneOverRadiiSquared,M=g.x,z=g.y,S=g.z,E=m;E.x=2*w.x*M,E.y=2*w.y*z,E.z=2*w.z*S;var b,I,O,R,_,C,N,T,P,q,A,U=(1-v)*o.magnitude(e)/(.5*o.magnitude(E)),L=0;do{U-=L,O=1/(1+U*M),R=1/(1+U*z),_=1/(1+U*S),C=O*O,N=R*R,T=_*_,P=C*O,q=N*R,A=T*_,b=f*C+d*N+y*T-1,I=f*P*M+d*q*z+y*A*S;var B=-2*I;L=b/B}while(Math.abs(b)>a.EPSILON12);return n(t)?(t.x=r*O,t.y=i*R,t.z=u*_,t):new o(r*O,i*R,u*_)},s.prototype.scaleToGeocentricSurface=function(e,t){var n=e.x,r=e.y,i=e.z,a=this._oneOverRadiiSquared,u=1/Math.sqrt(n*n*a.x+r*r*a.y+i*i*a.z);return o.multiplyByScalar(e,u,t)},s.prototype.transformPositionToScaledSpace=function(e,t){return o.multiplyComponents(e,this._oneOverRadii,t)},s.prototype.transformPositionFromScaledSpace=function(e,t){return o.multiplyComponents(e,this._radii,t)},s.prototype.equals=function(e){return this===e||n(e)&&o.equals(this._radii,e._radii)},s.prototype.toString=function(){return this._radii.toString()},s}),define("Core/GeographicProjection",["./defaultValue","./defined","./defineProperties","./Cartesian3","./Cartographic","./Ellipsoid"],function(e,t,n,r,i,a){"use strict";var o=function(t){this._ellipsoid=e(t,a.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis};return n(o.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),o.prototype.project=function(e,n){var i=this._semimajorAxis,a=e.longitude*i,o=e.latitude*i,u=e.height;return t(n)?(n.x=a,n.y=o,n.z=u,n):new r(a,o,u)},o.prototype.unproject=function(e,n){var r=this._oneOverSemimajorAxis,a=e.x*r,o=e.y*r,u=e.z;return t(n)?(n.longitude=a,n.latitude=o,n.height=u,n):new i(a,o,u)},o}),define("Core/Enumeration",["./defined"],function(e){"use strict";var t=function(t,n,r){if(this.value=t,this.name=n,e(r))for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i])};return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.name},t}),define("Core/Intersect",["./Enumeration"],function(e){"use strict";var t={OUTSIDE:new e(-1,"OUTSIDE"),INTERSECTING:new e(0,"INTERSECTING"),INSIDE:new e(1,"INSIDE")};return t}),define("Core/Interval",["./defaultValue"],function(e){"use strict";var t=function(t,n){this.start=e(t,0),this.stop=e(n,0)};return t}),define("Core/Cartesian4",["./defaultValue","./defined","./DeveloperError","./freezeObject"],function(e,t,n,r){"use strict";var i=function(t,n,r,i){this.x=e(t,0),this.y=e(n,0),this.z=e(r,0),this.w=e(i,0)};i.fromElements=function(e,n,r,a,o){return t(o)?(o.x=e,o.y=n,o.z=r,o.w=a,o):new i(e,n,r,a)},i.clone=function(e,n){return t(e)?t(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new i(e.x,e.y,e.z,e.w):void 0},i.packedLength=4,i.pack=function(t,n,r){r=e(r,0),n[r++]=t.x,n[r++]=t.y,n[r++]=t.z,n[r]=t.w},i.unpack=function(n,r,a){return r=e(r,0),t(a)||(a=new i),a.x=n[r++],a.y=n[r++],a.z=n[r++],a.w=n[r],a},i.fromArray=i.unpack,i.getMaximumComponent=function(e){return Math.max(e.x,e.y,e.z,e.w)},i.getMinimumComponent=function(e){return Math.min(e.x,e.y,e.z,e.w)},i.getMinimumByComponent=function(e,n,r){return t(r)||(r=new i),r.x=Math.min(e.x,n.x),r.y=Math.min(e.y,n.y),r.z=Math.min(e.z,n.z),r.w=Math.min(e.w,n.w),r},i.getMaximumByComponent=function(e,n,r){return t(r)||(r=new i),r.x=Math.max(e.x,n.x),r.y=Math.max(e.y,n.y),r.z=Math.max(e.z,n.z),r.w=Math.max(e.w,n.w),r},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var a=new i;i.distance=function(e,t){return i.subtract(e,t,a),i.magnitude(a)},i.normalize=function(e,n){var r=i.magnitude(e);return t(n)?(n.x=e.x/r,n.y=e.y/r,n.z=e.z/r,n.w=e.w/r,n):new i(e.x/r,e.y/r,e.z/r,e.w/r)},i.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},i.multiplyComponents=function(e,n,r){return t(r)?(r.x=e.x*n.x,r.y=e.y*n.y,r.z=e.z*n.z,r.w=e.w*n.w,r):new i(e.x*n.x,e.y*n.y,e.z*n.z,e.w*n.w)},i.add=function(e,n,r){return t(r)?(r.x=e.x+n.x,r.y=e.y+n.y,r.z=e.z+n.z,r.w=e.w+n.w,r):new i(e.x+n.x,e.y+n.y,e.z+n.z,e.w+n.w)},i.subtract=function(e,n,r){return t(r)?(r.x=e.x-n.x,r.y=e.y-n.y,r.z=e.z-n.z,r.w=e.w-n.w,r):new i(e.x-n.x,e.y-n.y,e.z-n.z,e.w-n.w)},i.multiplyByScalar=function(e,n,r){return t(r)?(r.x=e.x*n,r.y=e.y*n,r.z=e.z*n,r.w=e.w*n,r):new i(e.x*n,e.y*n,e.z*n,e.w*n)},i.divideByScalar=function(e,n,r){return t(r)?(r.x=e.x/n,r.y=e.y/n,r.z=e.z/n,r.w=e.w/n,r):new i(e.x/n,e.y/n,e.z/n,e.w/n)},i.negate=function(e,n){return t(n)?(n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-e.w,n):new i(-e.x,-e.y,-e.z,-e.w)},i.abs=function(e,n){return t(n)?(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n.w=Math.abs(e.w),n):new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z),Math.abs(e.w))};var o=new i;i.lerp=function(e,t,n,r){return i.multiplyByScalar(t,n,o),r=i.multiplyByScalar(e,1-n,r),i.add(o,r,r)};var u=new i;return i.mostOrthogonalAxis=function(e,t){var n=i.normalize(e,u);return i.abs(n,n),t=n.x<=n.y?n.x<=n.z?n.x<=n.w?i.clone(i.UNIT_X,t):i.clone(i.UNIT_W,t):n.z<=n.w?i.clone(i.UNIT_Z,t):i.clone(i.UNIT_W,t):n.y<=n.z?n.y<=n.w?i.clone(i.UNIT_Y,t):i.clone(i.UNIT_W,t):n.z<=n.w?i.clone(i.UNIT_Z,t):i.clone(i.UNIT_W,t)},i.equals=function(e,n){return e===n||t(e)&&t(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},i.equalsEpsilon=function(e,n,r){return e===n||t(e)&&t(n)&&Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r&&Math.abs(e.z-n.z)<=r&&Math.abs(e.w-n.w)<=r},i.ZERO=r(new i(0,0,0,0)),i.UNIT_X=r(new i(1,0,0,0)),i.UNIT_Y=r(new i(0,1,0,0)),i.UNIT_Z=r(new i(0,0,1,0)),i.UNIT_W=r(new i(0,0,0,1)),i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},i}),define("Core/Matrix3",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,n,r,i,a){"use strict";function o(e){for(var t=0,n=0;9>n;++n){var r=e[n];t+=r*r}return Math.sqrt(t)}function u(e){for(var t=0,n=0;3>n;++n){var r=e[c.getElementIndex(h[n],l[n])];t+=2*r*r}return Math.sqrt(t)}function s(e,t){for(var n=a.EPSILON15,r=0,i=1,o=0;3>o;++o){var u=Math.abs(e[c.getElementIndex(h[o],l[o])]);u>r&&(i=o,r=u)}var s=1,f=0,d=l[i],p=h[i];if(Math.abs(e[c.getElementIndex(p,d)])>n){var m,y=e[c.getElementIndex(p,p)],x=e[c.getElementIndex(d,d)],v=e[c.getElementIndex(p,d)],w=(y-x)/2/v;m=0>w?-1/(-w+Math.sqrt(1+w*w)):1/(w+Math.sqrt(1+w*w)),s=1/Math.sqrt(1+m*m),f=m*s}return t=c.clone(c.IDENTITY,t),t[c.getElementIndex(d,d)]=t[c.getElementIndex(p,p)]=s,t[c.getElementIndex(p,d)]=f,t[c.getElementIndex(d,p)]=-f,t}var c=function(e,n,r,i,a,o,u,s,c){this[0]=t(e,0),this[1]=t(i,0),this[2]=t(u,0),this[3]=t(n,0),this[4]=t(a,0),this[5]=t(s,0),this[6]=t(r,0),this[7]=t(o,0),this[8]=t(c,0)};c.clone=function(e,t){return n(e)?n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new c(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]):void 0},c.fromArray=function(e,r,i){return r=t(r,0),n(i)||(i=new c),i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],i[4]=e[r+4],i[5]=e[r+5],i[6]=e[r+6],i[7]=e[r+7],i[8]=e[r+8],i[9]=e[r+9],i},c.fromColumnMajorArray=function(e,t){return c.clone(e,t)},c.fromRowMajorArray=function(e,t){return n(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new c(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},c.fromQuaternion=function(e,t){var r=e.x*e.x,i=e.x*e.y,a=e.x*e.z,o=e.x*e.w,u=e.y*e.y,s=e.y*e.z,l=e.y*e.w,h=e.z*e.z,f=e.z*e.w,d=e.w*e.w,p=r-u-h+d,m=2*(i-f),y=2*(a+l),x=2*(i+f),v=-r+u-h+d,w=2*(s-o),g=2*(a-l),M=2*(s+o),z=-r-u+h+d;return n(t)?(t[0]=p,t[1]=x,t[2]=g,t[3]=m,t[4]=v,t[5]=M,t[6]=y,t[7]=w,t[8]=z,t):new c(p,m,y,x,v,w,g,M,z)},c.fromScale=function(e,t){return n(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new c(e.x,0,0,0,e.y,0,0,0,e.z)},c.fromUniformScale=function(e,t){return n(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new c(e,0,0,0,e,0,0,0,e)},c.fromRotationX=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=i,t[6]=0,t[7]=-i,t[8]=r,t):new c(1,0,0,0,r,-i,0,i,r)},c.fromRotationY=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=1,t[5]=0,t[6]=i,t[7]=0,t[8]=r,t):new c(r,0,i,0,1,0,-i,0,r)},c.fromRotationZ=function(e,t){var r=Math.cos(e),i=Math.sin(e);return n(t)?(t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new c(r,-i,0,i,r,0,0,0,1)},c.toArray=function(e,t){return n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},c.getElementIndex=function(e,t){return 3*e+t},c.getColumn=function(t,r,i){var a=3*r,o=t[a],u=t[a+1],s=t[a+2];return n(i)?(i.x=o,i.y=u,i.z=s,i):new e(o,u,s)},c.setColumn=function(e,t,n,r){r=c.clone(e,r);var i=3*t;return r[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r},c.getRow=function(t,r,i){var a=t[r],o=t[r+3],u=t[r+6];return n(i)?(i.x=a,i.y=o,i.z=u,i):new e(a,o,u)},c.setRow=function(e,t,n,r){return r=c.clone(e,r),r[t]=n.x,r[t+3]=n.y,r[t+6]=n.z,r},c.multiply=function(e,t,r){var i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],u=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],l=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],h=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n(r)?(r[0]=i,r[1]=a,r[2]=o,r[3]=u,r[4]=s,r[5]=l,r[6]=h,r[7]=f,r[8]=d,r):new c(i,u,h,a,s,f,o,l,d)},c.multiplyByVector=function(t,r,i){var a=r.x,o=r.y,u=r.z,s=t[0]*a+t[3]*o+t[6]*u,c=t[1]*a+t[4]*o+t[7]*u,l=t[2]*a+t[5]*o+t[8]*u;return n(i)?(i.x=s,i.y=c,i.z=l,i):new e(s,c,l)},c.multiplyByScalar=function(e,t,r){return n(r)?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r):new c(e[0]*t,e[3]*t,e[6]*t,e[1]*t,e[4]*t,e[7]*t,e[2]*t,e[5]*t,e[8]*t)},c.negate=function(e,t){return n(t)?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t):new c(-e[0],-e[3],-e[6],-e[1],-e[4],-e[7],-e[2],-e[5],-e[8])},c.transpose=function(e,t){var r=e[0],i=e[3],a=e[6],o=e[1],u=e[4],s=e[7],l=e[2],h=e[5],f=e[8];return n(t)?(t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=l,t[7]=h,t[8]=f,t):new c(r,o,l,i,u,h,a,s,f)};var l=[1,0,0],h=[2,2,1],f=new c,d=new c;return c.getEigenDecomposition=function(e,t){var r=a.EPSILON20,i=10,l=0,h=0;n(t)||(t={});for(var p=t.unitary=c.clone(c.IDENTITY,t.unitary),m=t.diagonal=c.clone(e,t.diagonal),y=r*o(m);i>h&&u(m)>y;)s(m,f),c.transpose(f,d),c.multiply(m,f,m),c.multiply(d,m,m),c.multiply(p,f,p),++l>2&&(++h,l=0);return t},c.abs=function(e,t){return n(t)?(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t):new c(Math.abs(e[0]),Math.abs(e[3]),Math.abs(e[6]),Math.abs(e[1]),Math.abs(e[4]),Math.abs(e[7]),Math.abs(e[2]),Math.abs(e[5]),Math.abs(e[8]))},c.determinant=function(e){var t=e[0],n=e[3],r=e[6],i=e[1],a=e[4],o=e[7],u=e[2],s=e[5],c=e[8];return t*(a*c-s*o)+i*(s*r-n*c)+u*(n*o-a*r)},c.inverse=function(e,t){var n=e[0],i=e[1],o=e[2],u=e[3],s=e[4],l=e[5],h=e[6],f=e[7],d=e[8],p=c.determinant(e);if(Math.abs(p)<=a.EPSILON15)throw new r("matrix is not invertible");var m=new c(s*d-f*l,h*l-u*d,u*f-h*s,f*o-i*d,n*d-h*o,h*i-n*f,i*l-s*o,u*o-n*l,n*s-u*i),y=1/p;return c.multiplyByScalar(m,y,t)},c.equals=function(e,t){return e===t||n(e)&&n(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},c.equalsEpsilon=function(e,t,r){return e===t||n(e)&&n(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},c.IDENTITY=i(new c(1,0,0,0,1,0,0,0,1)),c.COLUMN0ROW0=0,c.COLUMN0ROW1=1,c.COLUMN0ROW2=2,c.COLUMN1ROW0=3,c.COLUMN1ROW1=4,c.COLUMN1ROW2=5,c.COLUMN2ROW0=6,c.COLUMN2ROW1=7,c.COLUMN2ROW2=8,c.prototype.clone=function(e){return c.clone(this,e)},c.prototype.equals=function(e){return c.equals(this,e)},c.prototype.equalsEpsilon=function(e,t){return c.equalsEpsilon(this,e,t)},c.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"},c}),define("Core/RuntimeError",["./defined"],function(e){"use strict";var t=function(e){this.name="RuntimeError",this.message=e;var t;try{throw new Error}catch(n){t=n.stack}this.stack=t};return t.prototype.toString=function(){var t=this.name+": "+this.message;return e(this.stack)&&(t+="\n"+this.stack.toString()),t},t}),define("Core/Matrix4",["./Cartesian3","./Cartesian4","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(e,t,n,r,i,a,o,u,s){"use strict";var c=function(e,t,r,i,a,o,u,s,c,l,h,f,d,p,m,y){this[0]=n(e,0),this[1]=n(a,0),this[2]=n(c,0),this[3]=n(d,0),this[4]=n(t,0),this[5]=n(o,0),this[6]=n(l,0),this[7]=n(p,0),this[8]=n(r,0),this[9]=n(u,0),this[10]=n(h,0),this[11]=n(m,0),this[12]=n(i,0),this[13]=n(s,0),this[14]=n(f,0),this[15]=n(y,0)};c.clone=function(e,t){return r(e)?r(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new c(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):void 0},c.fromArray=function(e,t,i){return t=n(t,0),r(i)||(i=new c),i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],i[4]=e[t+4],i[5]=e[t+5],i[6]=e[t+6],i[7]=e[t+7],i[8]=e[t+8],i[9]=e[t+9],i[10]=e[t+10],i[11]=e[t+11],i[12]=e[t+12],i[13]=e[t+13],i[14]=e[t+14],i[15]=e[t+15],i},c.fromColumnMajorArray=function(e,t){return c.clone(e,t)},c.fromRowMajorArray=function(e,t){return r(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new c(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},c.fromRotationTranslation=function(e,t,n){return r(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new c(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},new u,c.fromTranslationQuaternionRotationScale=function(e,t,n,i){r(i)||(i=new c);var a=n.x,o=n.y,u=n.z,s=t.x*t.x,l=t.x*t.y,h=t.x*t.z,f=t.x*t.w,d=t.y*t.y,p=t.y*t.z,m=t.y*t.w,y=t.z*t.z,x=t.z*t.w,v=t.w*t.w,w=s-d-y+v,g=2*(l-x),M=2*(h+m),z=2*(l+x),S=-s+d-y+v,E=2*(p-f),b=2*(h-m),I=2*(p+f),O=-s-d+y+v;return i[0]=w*a,i[1]=z*a,i[2]=b*a,i[3]=0,i[4]=g*o,i[5]=S*o,i[6]=I*o,i[7]=0,i[8]=M*u,i[9]=E*u,i[10]=O*u,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i},c.fromTranslation=function(e,t){return c.fromRotationTranslation(u.IDENTITY,e,t)},c.fromScale=function(e,t){return r(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new c(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},c.fromUniformScale=function(e,t){return r(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new c(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var l=new e,h=new e,f=new e;c.fromCamera=function(t,n){var i=t.eye,a=t.target,o=t.up;e.normalize(e.subtract(a,i,l),l),e.normalize(e.cross(l,o,h),h),e.normalize(e.cross(h,l,f),f);var u=h.x,s=h.y,d=h.z,p=l.x,m=l.y,y=l.z,x=f.x,v=f.y,w=f.z,g=i.x,M=i.y,z=i.z,S=u*-g+s*-M+d*-z,E=x*-g+v*-M+w*-z,b=p*g+m*M+y*z;return r(n)?(n[0]=u,n[1]=x,n[2]=-p,n[3]=0,n[4]=s,n[5]=v,n[6]=-m,n[7]=0,n[8]=d,n[9]=w,n[10]=-y,n[11]=0,n[12]=S,n[13]=E,n[14]=b,n[15]=1,n):new c(u,s,d,S,x,v,w,E,-p,-m,-y,b,0,0,0,1)},c.computePerspectiveFieldOfView=function(e,t,n,i,a){var o=Math.tan(.5*e),u=1/o,s=u/t,l=(i+n)/(n-i),h=2*i*n/(n-i);return r(a)?(a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=l,a[11]=-1,a[12]=0,a[13]=0,a[14]=h,a[15]=0,a):new c(s,0,0,0,0,u,0,0,0,0,l,h,0,0,-1,0)},c.computeOrthographicOffCenter=function(e,t,n,i,a,o,u){var s=1/(t-e),l=1/(i-n),h=1/(o-a),f=-(t+e)*s,d=-(i+n)*l,p=-(o+a)*h;return s*=2,l*=2,h*=-2,r(u)?(u[0]=s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=h,u[11]=0,u[12]=f,u[13]=d,u[14]=p,u[15]=1,u):new c(s,0,0,f,0,l,0,d,0,0,h,p,0,0,0,1)},c.computePerspectiveOffCenter=function(e,t,n,i,a,o,u){var s=2*a/(t-e),l=2*a/(i-n),h=(t+e)/(t-e),f=(i+n)/(i-n),d=-(o+a)/(o-a),p=-1,m=-2*o*a/(o-a);return r(u)?(u[0]=s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l,u[6]=0,u[7]=0,u[8]=h,u[9]=f,u[10]=d,u[11]=p,u[12]=0,u[13]=0,u[14]=m,u[15]=0,u):new c(s,0,h,0,0,l,f,0,0,0,d,m,0,0,p,0)},c.computeInfinitePerspectiveOffCenter=function(e,t,n,i,a,o){var u=2*a/(t-e),s=2*a/(i-n),l=(t+e)/(t-e),h=(i+n)/(i-n),f=-1,d=-1,p=-2*a;return r(o)?(o[0]=u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=l,o[9]=h,o[10]=f,o[11]=d,o[12]=0,o[13]=0,o[14]=p,o[15]=0,o):new c(u,0,l,0,0,s,h,0,0,0,f,p,0,0,d,0)},c.computeViewportTransformation=function(e,t,i,a){e=n(e,n.EMPTY_OBJECT);var o=n(e.x,0),u=n(e.y,0),s=n(e.width,0),l=n(e.height,0);t=n(t,0),i=n(i,1);var h=.5*s,f=.5*l,d=.5*(i-t),p=h,m=f,y=d,x=o+h,v=u+f,w=t+d,g=1;return r(a)?(a[0]=p,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=m,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=y,a[11]=0,a[12]=x,a[13]=v,a[14]=w,a[15]=g,a):new c(p,0,0,x,0,m,0,v,0,0,y,w,0,0,0,g)},c.toArray=function(e,t){return r(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},c.getElementIndex=function(e,t){return 4*e+t},c.getColumn=function(e,n,i){var a=4*n,o=e[a],u=e[a+1],s=e[a+2],c=e[a+3];return r(i)?(i.x=o,i.y=u,i.z=s,i.w=c,i):new t(o,u,s,c)},c.setColumn=function(e,t,n,r){r=c.clone(e,r);var i=4*t;return r[i]=n.x,r[i+1]=n.y,r[i+2]=n.z,r[i+3]=n.w,r},c.getRow=function(e,n,i){var a=e[n],o=e[n+4],u=e[n+8],s=e[n+12];return r(i)?(i.x=a,i.y=o,i.z=u,i.w=s,i):new t(a,o,u,s)},c.setRow=function(e,t,n,r){return r=c.clone(e,r),r[t]=n.x,r[t+4]=n.y,r[t+8]=n.z,r[t+12]=n.w,r},c.multiply=function(e,t,n){var i=e[0],a=e[1],o=e[2],u=e[3],s=e[4],l=e[5],h=e[6],f=e[7],d=e[8],p=e[9],m=e[10],y=e[11],x=e[12],v=e[13],w=e[14],g=e[15],M=t[0],z=t[1],S=t[2],E=t[3],b=t[4],I=t[5],O=t[6],R=t[7],_=t[8],C=t[9],N=t[10],T=t[11],P=t[12],q=t[13],A=t[14],U=t[15],L=i*M+s*z+d*S+x*E,B=a*M+l*z+p*S+v*E,F=o*M+h*z+m*S+w*E,D=u*M+f*z+y*S+g*E,W=i*b+s*I+d*O+x*R,V=a*b+l*I+p*O+v*R,j=o*b+h*I+m*O+w*R,k=u*b+f*I+y*O+g*R,Z=i*_+s*C+d*N+x*T,H=a*_+l*C+p*N+v*T,G=o*_+h*C+m*N+w*T,K=u*_+f*C+y*N+g*T,Y=i*P+s*q+d*A+x*U,X=a*P+l*q+p*A+v*U,J=o*P+h*q+m*A+w*U,Q=u*P+f*q+y*A+g*U;return r(n)?(n[0]=L,n[1]=B,n[2]=F,n[3]=D,n[4]=W,n[5]=V,n[6]=j,n[7]=k,n[8]=Z,n[9]=H,n[10]=G,n[11]=K,n[12]=Y,n[13]=X,n[14]=J,n[15]=Q,n):new c(L,W,Z,Y,B,V,H,X,F,j,G,J,D,k,K,Q)},c.multiplyTransformation=function(e,t,n){var i=e[0],a=e[1],o=e[2],u=e[4],s=e[5],l=e[6],h=e[8],f=e[9],d=e[10],p=e[12],m=e[13],y=e[14],x=t[0],v=t[1],w=t[2],g=t[4],M=t[5],z=t[6],S=t[8],E=t[9],b=t[10],I=t[12],O=t[13],R=t[14],_=i*x+u*v+h*w,C=a*x+s*v+f*w,N=o*x+l*v+d*w,T=i*g+u*M+h*z,P=a*g+s*M+f*z,q=o*g+l*M+d*z,A=i*S+u*E+h*b,U=a*S+s*E+f*b,L=o*S+l*E+d*b,B=i*I+u*O+h*R+p,F=a*I+s*O+f*R+m,D=o*I+l*O+d*R+y;return r(n)?(n[0]=_,n[1]=C,n[2]=N,n[3]=0,n[4]=T,n[5]=P,n[6]=q,n[7]=0,n[8]=A,n[9]=U,n[10]=L,n[11]=0,n[12]=B,n[13]=F,n[14]=D,n[15]=1,n):new c(_,T,A,B,C,P,U,F,N,q,L,D,0,0,0,1)
},c.multiplyByTranslation=function(e,t,n){var i=t.x,a=t.y,o=t.z,u=i*e[0]+a*e[4]+o*e[8]+e[12],s=i*e[1]+a*e[5]+o*e[9]+e[13],l=i*e[2]+a*e[6]+o*e[10]+e[14];return r(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=u,n[13]=s,n[14]=l,n[15]=e[15],n):new c(e[0],e[4],e[8],u,e[1],e[5],e[9],s,e[2],e[6],e[10],l,e[3],e[7],e[11],e[15])};var d=new e;return c.multiplyByUniformScale=function(e,t,n){return d.x=t,d.y=t,d.z=t,c.multiplyByScale(e,d,n)},c.multiplyByScale=function(e,t,n){var i=t.x,a=t.y,o=t.z;return 1===i&&1===a&&1===o?c.clone(e,n):r(n)?(n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=0,n[4]=a*e[4],n[5]=a*e[5],n[6]=a*e[6],n[7]=0,n[8]=o*e[8],n[9]=o*e[9],n[10]=o*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n):new c(i*e[0],a*e[4],o*e[8],e[12],i*e[1],a*e[5],o*e[9],e[13],i*e[2],a*e[6],o*e[10],e[14],0,0,0,1)},c.multiplyByVector=function(e,n,i){var a=n.x,o=n.y,u=n.z,s=n.w,c=e[0]*a+e[4]*o+e[8]*u+e[12]*s,l=e[1]*a+e[5]*o+e[9]*u+e[13]*s,h=e[2]*a+e[6]*o+e[10]*u+e[14]*s,f=e[3]*a+e[7]*o+e[11]*u+e[15]*s;return r(i)?(i.x=c,i.y=l,i.z=h,i.w=f,i):new t(c,l,h,f)},c.multiplyByPointAsVector=function(t,n,i){var a=n.x,o=n.y,u=n.z,s=t[0]*a+t[4]*o+t[8]*u,c=t[1]*a+t[5]*o+t[9]*u,l=t[2]*a+t[6]*o+t[10]*u;return r(i)?(i.x=s,i.y=c,i.z=l,i):new e(s,c,l)},c.multiplyByPoint=function(t,n,i){var a=n.x,o=n.y,u=n.z,s=t[0]*a+t[4]*o+t[8]*u+t[12],c=t[1]*a+t[5]*o+t[9]*u+t[13],l=t[2]*a+t[6]*o+t[10]*u+t[14];return r(i)?(i.x=s,i.y=c,i.z=l,i):new e(s,c,l)},c.multiplyByScalar=function(e,t,n){return r(n)?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n):new c(e[0]*t,e[4]*t,e[8]*t,e[12]*t,e[1]*t,e[5]*t,e[9]*t,e[13]*t,e[2]*t,e[6]*t,e[10]*t,e[14]*t,e[3]*t,e[7]*t,e[11]*t,e[15]*t)},c.negate=function(e,t){return r(t)?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t):new c(-e[0],-e[4],-e[8],-e[12],-e[1],-e[5],-e[9],-e[13],-e[2],-e[6],-e[10],-e[14],-e[3],-e[7],-e[11],-e[15])},c.transpose=function(e,t){if(!r(t))return new c(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);var n=e[1],i=e[2],a=e[3],o=e[6],u=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=u,t[14]=s,t[15]=e[15],t},c.abs=function(e,t){return r(t)?(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t):new c(Math.abs(e[0]),Math.abs(e[4]),Math.abs(e[8]),Math.abs(e[12]),Math.abs(e[1]),Math.abs(e[5]),Math.abs(e[9]),Math.abs(e[13]),Math.abs(e[2]),Math.abs(e[6]),Math.abs(e[10]),Math.abs(e[14]),Math.abs(e[3]),Math.abs(e[7]),Math.abs(e[11]),Math.abs(e[15]))},c.equals=function(e,t){return e===t||r(e)&&r(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},c.equalsEpsilon=function(e,t,n){return e===t||r(e)&&r(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n},c.getTranslation=function(t,n){return r(n)?(n.x=t[12],n.y=t[13],n.z=t[14],n):new e(t[12],t[13],t[14])},c.getRotation=function(e,t){return r(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t):new u(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},c.inverse=function(e,t){var n=e[0],i=e[4],a=e[8],u=e[12],l=e[1],h=e[5],f=e[9],d=e[13],p=e[2],m=e[6],y=e[10],x=e[14],v=e[3],w=e[7],g=e[11],M=e[15],z=y*M,S=x*g,E=m*M,b=x*w,I=m*g,O=y*w,R=p*M,_=x*v,C=p*g,N=y*v,T=p*w,P=m*v,q=z*h+b*f+I*d-(S*h+E*f+O*d),A=S*l+R*f+N*d-(z*l+_*f+C*d),U=E*l+_*h+T*d-(b*l+R*h+P*d),L=O*l+C*h+P*f-(I*l+N*h+T*f),B=S*i+E*a+O*u-(z*i+b*a+I*u),F=z*n+_*a+C*u-(S*n+R*a+N*u),D=b*n+R*i+P*u-(E*n+_*i+T*u),W=I*n+N*i+T*a-(O*n+C*i+P*a);z=a*d,S=u*f,E=i*d,b=u*h,I=i*f,O=a*h,R=n*d,_=u*l,C=n*f,N=a*l,T=n*h,P=i*l;var V=z*w+b*g+I*M-(S*w+E*g+O*M),j=S*v+R*g+N*M-(z*v+_*g+C*M),k=E*v+_*w+T*M-(b*v+R*w+P*M),Z=O*v+C*w+P*g-(I*v+N*w+T*g),H=E*y+O*x+S*m-(I*x+z*m+b*y),G=C*x+z*p+_*y-(R*y+N*x+S*p),K=R*m+P*x+b*p-(T*x+E*p+_*m),Y=T*y+I*p+N*m-(C*m+P*y+O*p),X=n*q+i*A+a*U+u*L;if(Math.abs(X)<o.EPSILON20)throw new s("matrix is not invertible because its determinate is zero.");return X=1/X,r(t)?(t[0]=q*X,t[1]=A*X,t[2]=U*X,t[3]=L*X,t[4]=B*X,t[5]=F*X,t[6]=D*X,t[7]=W*X,t[8]=V*X,t[9]=j*X,t[10]=k*X,t[11]=Z*X,t[12]=H*X,t[13]=G*X,t[14]=K*X,t[15]=Y*X,t):new c(q*X,B*X,V*X,H*X,A*X,F*X,j*X,G*X,U*X,D*X,k*X,K*X,L*X,W*X,Z*X,Y*X)},c.inverseTransformation=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[4],u=e[5],s=e[6],l=e[8],h=e[9],f=e[10],d=e[12],p=e[13],m=e[14],y=-n*d-i*p-a*m,x=-o*d-u*p-s*m,v=-l*d-h*p-f*m;return r(t)?(t[0]=n,t[1]=o,t[2]=l,t[3]=0,t[4]=i,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=s,t[10]=f,t[11]=0,t[12]=y,t[13]=x,t[14]=v,t[15]=1,t):new c(n,i,a,y,o,u,s,x,l,h,f,v,0,0,0,1)},c.IDENTITY=a(new c(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),c.COLUMN0ROW0=0,c.COLUMN0ROW1=1,c.COLUMN0ROW2=2,c.COLUMN0ROW3=3,c.COLUMN1ROW0=4,c.COLUMN1ROW1=5,c.COLUMN1ROW2=6,c.COLUMN1ROW3=7,c.COLUMN2ROW0=8,c.COLUMN2ROW1=9,c.COLUMN2ROW2=10,c.COLUMN2ROW3=11,c.COLUMN3ROW0=12,c.COLUMN3ROW1=13,c.COLUMN3ROW2=14,c.COLUMN3ROW3=15,c.prototype.clone=function(e){return c.clone(this,e)},c.prototype.equals=function(e){return c.equals(this,e)},c.prototype.equalsEpsilon=function(e,t){return c.equalsEpsilon(this,e,t)},c.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},c}),define("Core/BoundingSphere",["./Cartesian3","./Cartographic","./defaultValue","./defined","./DeveloperError","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix4"],function(e,t,n,r,i,a,o,u,s,c){"use strict";var l=function(t,r){this.center=e.clone(n(t,e.ZERO)),this.radius=n(r,0)},h=new e,f=new e,d=new e,p=new e,m=new e,y=new e,x=new e,v=new e,w=new e,g=new e,M=new e,z=new e;l.fromPoints=function(t,n){if(r(n)||(n=new l),!r(t)||0===t.length)return n.center=e.clone(e.ZERO,n.center),n.radius=0,n;for(var i=e.clone(t[0],x),a=e.clone(i,h),o=e.clone(i,f),u=e.clone(i,d),s=e.clone(i,p),c=e.clone(i,m),S=e.clone(i,y),E=t.length,b=1;E>b;b++){e.clone(t[b],i);var I=i.x,O=i.y,R=i.z;I<a.x&&e.clone(i,a),I>s.x&&e.clone(i,s),O<o.y&&e.clone(i,o),O>c.y&&e.clone(i,c),R<u.z&&e.clone(i,u),R>S.z&&e.clone(i,S)}var _=e.magnitudeSquared(e.subtract(s,a,v)),C=e.magnitudeSquared(e.subtract(c,o,v)),N=e.magnitudeSquared(e.subtract(S,u,v)),T=a,P=s,q=_;C>q&&(q=C,T=o,P=c),N>q&&(q=N,T=u,P=S);var A=w;A.x=.5*(T.x+P.x),A.y=.5*(T.y+P.y),A.z=.5*(T.z+P.z);var U=e.magnitudeSquared(e.subtract(P,A,v)),L=Math.sqrt(U),B=g;B.x=a.x,B.y=o.y,B.z=u.z;var F=M;F.x=s.x,F.y=c.y,F.z=S.z;var D=e.multiplyByScalar(e.add(B,F,v),.5,z),W=0;for(b=0;E>b;b++){e.clone(t[b],i);var V=e.magnitude(e.subtract(i,D,v));V>W&&(W=V);var j=e.magnitudeSquared(e.subtract(i,A,v));if(j>U){var k=Math.sqrt(j);L=.5*(L+k),U=L*L;var Z=k-L;A.x=(L*A.x+Z*i.x)/k,A.y=(L*A.y+Z*i.y)/k,A.z=(L*A.z+Z*i.z)/k}}return W>L?(e.clone(A,n.center),n.radius=L):(e.clone(D,n.center),n.radius=W),n};var S=new o,E=new e,b=new e,I=new t,O=new t;l.fromExtent2D=function(e,t,n){return l.fromExtentWithHeights2D(e,t,0,0,n)},l.fromExtentWithHeights2D=function(t,i,a,o,u){if(r(u)||(u=new l),!r(t))return u.center=e.clone(e.ZERO,u.center),u.radius=0,u;i=n(i,S),t.getSouthwest(I),I.height=a,t.getNortheast(O),O.height=o;var s=i.project(I,E),c=i.project(O,b),h=c.x-s.x,f=c.y-s.y,d=c.z-s.z;u.radius=.5*Math.sqrt(h*h+f*f+d*d);var p=u.center;return p.x=s.x+.5*h,p.y=s.y+.5*f,p.z=s.z+.5*d,u};var R=[];l.fromExtent3D=function(e,t,i,o){t=n(t,a.WGS84),i=n(i,0);var u;return r(e)&&(u=e.subsample(t,i,R)),l.fromPoints(u,o)},l.fromVertices=function(t,i,a,o){if(r(o)||(o=new l),!r(t)||0===t.length)return o.center=e.clone(e.ZERO,o.center),o.radius=0,o;i=n(i,e.ZERO),a=n(a,3);var u=x;u.x=t[0]+i.x,u.y=t[1]+i.y,u.z=t[2]+i.z;for(var s=e.clone(u,h),c=e.clone(u,f),S=e.clone(u,d),E=e.clone(u,p),b=e.clone(u,m),I=e.clone(u,y),O=t.length,R=0;O>R;R+=a){var _=t[R]+i.x,C=t[R+1]+i.y,N=t[R+2]+i.z;u.x=_,u.y=C,u.z=N,_<s.x&&e.clone(u,s),_>E.x&&e.clone(u,E),C<c.y&&e.clone(u,c),C>b.y&&e.clone(u,b),N<S.z&&e.clone(u,S),N>I.z&&e.clone(u,I)}var T=e.magnitudeSquared(e.subtract(E,s,v)),P=e.magnitudeSquared(e.subtract(b,c,v)),q=e.magnitudeSquared(e.subtract(I,S,v)),A=s,U=E,L=T;P>L&&(L=P,A=c,U=b),q>L&&(L=q,A=S,U=I);var B=w;B.x=.5*(A.x+U.x),B.y=.5*(A.y+U.y),B.z=.5*(A.z+U.z);var F=e.magnitudeSquared(e.subtract(U,B,v)),D=Math.sqrt(F),W=g;W.x=s.x,W.y=c.y,W.z=S.z;var V=M;V.x=E.x,V.y=b.y,V.z=I.z;var j=e.multiplyByScalar(e.add(W,V,v),.5,z),k=0;for(R=0;O>R;R+=a){u.x=t[R]+i.x,u.y=t[R+1]+i.y,u.z=t[R+2]+i.z;var Z=e.magnitude(e.subtract(u,j,v));Z>k&&(k=Z);var H=e.magnitudeSquared(e.subtract(u,B,v));if(H>F){var G=Math.sqrt(H);D=.5*(D+G),F=D*D;var K=G-D;B.x=(D*B.x+K*u.x)/G,B.y=(D*B.y+K*u.y)/G,B.z=(D*B.z+K*u.z)/G}}return k>D?(e.clone(B,o.center),o.radius=D):(e.clone(j,o.center),o.radius=k),o},l.fromCornerPoints=function(t,n,i){r(i)||(i=new l);var a=i.center;return e.add(t,n,a),e.multiplyByScalar(a,.5,a),i.radius=e.distance(a,n),i},l.fromEllipsoid=function(t,n){return r(n)||(n=new l),e.clone(e.ZERO,n.center),n.radius=t.maximumRadius,n},l.clone=function(t,n){return r(t)?r(n)?(n.center=e.clone(t.center,n.center),n.radius=t.radius,n):new l(t.center,t.radius):void 0};var _=new e,C=new e;l.union=function(t,n,i){r(i)||(i=new l);var a=t.center,o=n.center;e.add(a,o,C);var u=e.multiplyByScalar(C,.5,C),s=e.magnitude(e.subtract(a,u,_))+t.radius,c=e.magnitude(e.subtract(o,u,_))+n.radius;return i.radius=Math.max(s,c),e.clone(u,i.center),i};var N=new e;l.expand=function(t,n,r){r=l.clone(t,r);var i=e.magnitude(e.subtract(n,r.center,N));return i>r.radius&&(r.radius=i),r},l.intersect=function(t,n){var r=t.center,i=t.radius,a=e.dot(n,r)+n.w;return-i>a?u.OUTSIDE:i>a?u.INTERSECTING:u.INSIDE};var T=new e;l.transform=function(t,n,i){return r(i)||(i=new l),i.center=c.multiplyByPoint(n,t.center,i.center),i.radius=Math.max(e.magnitude(c.getColumn(n,0,T)),e.magnitude(c.getColumn(n,1,T)),e.magnitude(c.getColumn(n,2,T)))*t.radius,i},l.transformWithoutScale=function(e,t,n){return r(n)||(n=new l),n.center=c.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};var P=new e;l.getPlaneDistances=function(t,n,i,a){r(a)||(a=new s);var o=e.subtract(t.center,n,P),u=e.multiplyByScalar(i,e.dot(i,o),P),c=e.magnitude(u);return a.start=c-t.radius,a.stop=c+t.radius,a};for(var q=new e,A=new e,U=new e,L=new e,B=new e,F=new t,D=new Array(8),W=0;8>W;++W)D[W]=new e;var V=new o;return l.projectTo2D=function(t,r,i){r=n(r,V);var a=r.ellipsoid,o=t.center,u=t.radius,s=a.geodeticSurfaceNormal(o,q),c=e.cross(e.UNIT_Z,s,A);e.normalize(c,c);var h=e.cross(s,c,U);e.normalize(h,h),e.multiplyByScalar(s,u,s),e.multiplyByScalar(h,u,h),e.multiplyByScalar(c,u,c);var f=e.negate(h,B),d=e.negate(c,L),p=D,m=p[0];e.add(s,h,m),e.add(m,c,m),m=p[1],e.add(s,h,m),e.add(m,d,m),m=p[2],e.add(s,f,m),e.add(m,d,m),m=p[3],e.add(s,f,m),e.add(m,c,m),e.negate(s,s),m=p[4],e.add(s,h,m),e.add(m,c,m),m=p[5],e.add(s,h,m),e.add(m,d,m),m=p[6],e.add(s,f,m),e.add(m,d,m),m=p[7],e.add(s,f,m),e.add(m,c,m);for(var y=p.length,x=0;y>x;++x){var v=p[x];e.add(o,v,v);var w=a.cartesianToCartographic(v,F);r.project(w,v)}i=l.fromPoints(p,i),o=i.center;var g=o.x,M=o.y,z=o.z;return o.x=z,o.y=g,o.z=M,i},l.equals=function(t,n){return t===n||r(t)&&r(n)&&e.equals(t.center,n.center)&&t.radius===n.radius},l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.union=function(e,t){return l.union(this,e,t)},l.prototype.expand=function(e,t){return l.expand(this,e,t)},l.prototype.intersect=function(e){return l.intersect(this,e)},l.prototype.getPlaneDistances=function(e,t,n){return l.getPlaneDistances(this,e,t,n)},l.prototype.projectTo2D=function(e,t){return l.projectTo2D(this,e,t)},l.prototype.equals=function(e){return l.equals(this,e)},l}),define("Core/EllipsoidalOccluder",["./defaultValue","./defined","./defineProperties","./DeveloperError","./Cartesian3","./BoundingSphere"],function(e,t,n,r,i,a){"use strict";function o(e,t,n){var r=e.transformPositionToScaledSpace(t,d),a=i.magnitudeSquared(r),o=Math.sqrt(a),u=i.divideByScalar(r,o,p);a=Math.max(1,a),o=Math.max(1,o);var s=i.dot(u,n),c=i.magnitude(i.cross(u,n)),l=1/o,h=Math.sqrt(a-1)*l;return 1/(s*l-c*h)}function u(e,t,n){return 0>=t||t===1/0||t!==t?void 0:i.multiplyByScalar(e,t,n)}function s(e,t){return e.transformPositionToScaledSpace(t,m),i.normalize(m,m)}var c=function(e,n){this._ellipsoid=e,this._cameraPosition=new i,this._cameraPositionInScaledSpace=new i,this._distanceToLimbInScaledSpaceSquared=0,t(n)&&(this.cameraPosition=n)};n(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){var t=this._ellipsoid,n=t.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),r=i.magnitudeSquared(n)-1;i.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=n,this._distanceToLimbInScaledSpaceSquared=r}}});var l=new i;c.prototype.isPointVisible=function(e){var t=this._ellipsoid,n=t.transformPositionToScaledSpace(e,l);return this.isScaledSpacePointVisible(n)},c.prototype.isScaledSpacePointVisible=function(e){var t=this._cameraPositionInScaledSpace,n=this._distanceToLimbInScaledSpaceSquared,r=i.subtract(e,t,l),a=-i.dot(r,t),o=a>n&&a*a/i.magnitudeSquared(r)>n;return!o},c.prototype.computeHorizonCullingPoint=function(e,t,n){for(var r=this._ellipsoid,i=s(r,e),a=0,c=0,l=t.length;l>c;++c){var h=t[c],f=o(r,h,i);a=Math.max(a,f)}return u(i,a,n)};var h=new i;c.prototype.computeHorizonCullingPointFromVertices=function(t,n,r,a,c){a=e(a,i.ZERO);for(var l=this._ellipsoid,f=s(l,t),d=0,p=0,m=n.length;m>p;p+=r){h.x=n[p]+a.x,h.y=n[p+1]+a.y,h.z=n[p+2]+a.z;var y=o(l,h,f);d=Math.max(d,y)}return u(f,d,c)};var f=[];c.prototype.computeHorizonCullingPointFromExtent=function(e,t,n){var r=e.subsample(t,0,f),o=a.fromPoints(r);return i.magnitude(o.center)<.1*t.minimumRadius?void 0:this.computeHorizonCullingPoint(o.center,r,n)};var d=new i,p=new i,m=new i;return c}),define("Core/Fullscreen",["./defined"],function(e){"use strict";var t,n={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},r={};return r.supportsFullscreen=function(){if(e(t))return t;t=!1;var r=document.body;if("function"==typeof r.requestFullscreen)return n.requestFullscreen="requestFullscreen",n.exitFullscreen="exitFullscreen",n.fullscreenEnabled="fullscreenEnabled",n.fullscreenElement="fullscreenElement",n.fullscreenchange="fullscreenchange",n.fullscreenerror="fullscreenerror",t=!0;for(var i,a=["webkit","moz","o","ms","khtml"],o=0,u=a.length;u>o;++o){var s=a[o];i=s+"RequestFullscreen","function"==typeof r[i]?(n.requestFullscreen=i,t=!0):(i=s+"RequestFullScreen","function"==typeof r[i]&&(n.requestFullscreen=i,t=!0)),i=s+"ExitFullscreen","function"==typeof document[i]?n.exitFullscreen=i:(i=s+"CancelFullScreen","function"==typeof document[i]&&(n.exitFullscreen=i)),i=s+"FullscreenEnabled",e(document[i])?n.fullscreenEnabled=i:(i=s+"FullScreenEnabled",e(document[i])&&(n.fullscreenEnabled=i)),i=s+"FullscreenElement",e(document[i])?n.fullscreenElement=i:(i=s+"FullScreenElement",e(document[i])&&(n.fullscreenElement=i)),i=s+"fullscreenchange",e(document["on"+i])&&("ms"===s&&(i="MSFullscreenChange"),n.fullscreenchange=i),i=s+"fullscreenerror",e(document["on"+i])&&("ms"===s&&(i="MSFullscreenError"),n.fullscreenerror=i)}return t},r.requestFullscreen=function(e){r.supportsFullscreen()&&e[n.requestFullscreen]()},r.exitFullscreen=function(){r.supportsFullscreen()&&document[n.exitFullscreen]()},r.isFullscreenEnabled=function(){return r.supportsFullscreen()?document[n.fullscreenEnabled]:void 0},r.getFullscreenElement=function(){return r.supportsFullscreen()?document[n.fullscreenElement]:void 0},r.isFullscreen=function(){return r.supportsFullscreen()?null!==r.getFullscreenElement():void 0},r.getFullscreenChangeEventName=function(){return r.supportsFullscreen()?n.fullscreenchange:void 0},r.getFullscreenErrorEventName=function(){return r.supportsFullscreen()?n.fullscreenerror:void 0},r}),define("Core/FeatureDetection",["./defined","./Fullscreen"],function(e,t){"use strict";function n(e){for(var t=e.split("."),n=0,r=t.length;r>n;++n)t[n]=parseInt(t[n],10);return t}function r(){if(!e(h)){var t=/ Chrome\/([\.0-9]+)/.exec(navigator.userAgent);null===t?h=!1:(h=!0,f=n(t[1]))}return h}function i(){return r()&&f}function a(){if(!e(d))if(r()||!/ Safari\/[\.0-9]+/.test(navigator.userAgent))d=!1;else{var t=/ Version\/([\.0-9]+)/.exec(navigator.userAgent);null===t?d=!1:(d=!0,p=n(t[1]))}return d}function o(){return a()&&p}function u(){if(!e(m)){var t=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(navigator.userAgent);null===t?m=!1:(m=!0,y=n(t[1]),y.isNightly=!!t[2])}return m}function s(){return u()&&y}function c(){if(!e(x)){var t;"Microsoft Internet Explorer"===navigator.appName?(t=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent),null!==t&&(x=!0,v=n(t[1]))):"Netscape"===navigator.appName?(t=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent),null!==t&&(x=!0,v=n(t[1]))):x=!1}return x}function l(){return c()&&v}var h,f,d,p,m,y,x,v,w={isChrome:r,chromeVersion:i,isSafari:a,safariVersion:o,isWebkit:u,webkitVersion:s,isInternetExplorer:c,internetExplorerVersion:l};w.supportsFullscreen=function(){return t.supportsFullscreen()},w.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer};var g;return w.supportsTransferringArrayBuffers=function(){if(!e(g)){if(!w.supportsTypedArrays())return g=!1,void 0;var t=new ArrayBuffer(1);try{postMessage({value:t},[t]),g=!0}catch(n){g=!1}}return g},w}),define("Core/Intersections2D",["./Cartesian3","./defined","./DeveloperError"],function(e,t){"use strict";var n={};return n.clipTriangleAtAxisAlignedThreshold=function(e,n,r,i,a,o){t(o)?o.length=0:o=[];var u,s,c;n?(u=e>r,s=e>i,c=e>a):(u=r>e,s=i>e,c=a>e);var l,h,f,d,p,m,y=u+s+c;return 1===y?u?(l=(e-r)/(i-r),h=(e-r)/(a-r),o.push(1),o.push(2),1!==h&&(o.push(-1),o.push(0),o.push(2),o.push(h)),1!==l&&(o.push(-1),o.push(0),o.push(1),o.push(l))):s?(f=(e-i)/(a-i),d=(e-i)/(r-i),o.push(2),o.push(0),1!==d&&(o.push(-1),o.push(1),o.push(0),o.push(d)),1!==f&&(o.push(-1),o.push(1),o.push(2),o.push(f))):c&&(p=(e-a)/(r-a),m=(e-a)/(i-a),o.push(0),o.push(1),1!==m&&(o.push(-1),o.push(2),o.push(1),o.push(m)),1!==p&&(o.push(-1),o.push(2),o.push(0),o.push(p))):2===y?u||r===e?s||i===e?c||a===e||(h=(e-r)/(a-r),f=(e-i)/(a-i),o.push(2),o.push(-1),o.push(0),o.push(2),o.push(h),o.push(-1),o.push(1),o.push(2),o.push(f)):(m=(e-a)/(i-a),l=(e-r)/(i-r),o.push(1),o.push(-1),o.push(2),o.push(1),o.push(m),o.push(-1),o.push(0),o.push(1),o.push(l)):(d=(e-i)/(r-i),p=(e-a)/(r-a),o.push(0),o.push(-1),o.push(1),o.push(0),o.push(d),o.push(-1),o.push(2),o.push(0),o.push(p)):3===y||(o.push(0),o.push(1),o.push(2)),o},n.computeBarycentricCoordinates=function(n,r,i,a,o,u,s,c,l){var h=i-s,f=s-o,d=u-c,p=a-c,m=1/(d*h+f*p),y=r-c,x=n-s,v=(d*x+f*y)*m,w=(-p*x+h*y)*m,g=1-v-w;return t(l)?(l.x=v,l.y=w,l.z=g,l):new e(v,w,g)},n}),define("Workers/createTaskProcessorWorker",["../Core/defaultValue","../Core/defined"],function(e,t){"use strict";var n=function(n){var r,i=[],a={id:void 0,result:void 0,error:void 0};return function(o){var u=o.data;i.length=0,a.id=u.id,a.error=void 0,a.result=void 0;try{a.result=n(u.parameters,i)}catch(s){a.error=s}t(r)||(r=e(self.webkitPostMessage,self.postMessage));try{r(a,i)}catch(s){a.result=void 0,a.error="postMessage failed with error: "+s+"\n  with responseMessage: "+JSON.stringify(a),r(a)}}};return n}),define("Workers/upsampleQuantizedTerrainMesh",["../Core/BoundingSphere","../Core/Cartesian3","../Core/Cartographic","../Core/defined","../Core/Ellipsoid","../Core/EllipsoidalOccluder","../Core/FeatureDetection","../Core/Intersections2D","../Core/Math","./createTaskProcessorWorker"],function(e,t,n,r,i,a,o,u,s,c){"use strict";function l(n,r){var c=n.isEastChild,l=n.isNorthChild,b=c?.5:0,I=c?1:.5,O=l?.5:0,R=l?1:.5,_=w,C=g,N=M;_.length=0,C.length=0,N.length=0;var T=z;T.length=0;var P,q,A,U={},L=n.vertices,B=n.indices,F=L.length/3,D=L.subarray(0,F),W=L.subarray(F,2*F),V=L.subarray(2*F,3*F),j=0;for(P=0;F>P;++P)q=D[P]/d,A=W[P]/d,(c&&q>=.5||!c&&.5>=q)&&(l&&A>=.5||!l&&.5>=A)&&(U[P]=j,_.push(q),C.push(A),N.push(V[P]),++j);var k=[];k.push(new h),k.push(new h),k.push(new h);var Z=[];Z.push(new h),Z.push(new h),Z.push(new h);var H,G;for(P=0;P<B.length;P+=3){var K=B[P],Y=B[P+1],X=B[P+2],J=D[K]/d,Q=D[Y]/d,$=D[X]/d;k[0].initializeIndexed(D,W,V,K),k[1].initializeIndexed(D,W,V,Y),k[2].initializeIndexed(D,W,V,X);var et=u.clipTriangleAtAxisAlignedThreshold(.5,c,J,Q,$,p);H=0,H>=et.length||(H=Z[0].initializeFromClipResult(et,H,k),H>=et.length||(H=Z[1].initializeFromClipResult(et,H,k),H>=et.length||(H=Z[2].initializeFromClipResult(et,H,k),G=u.clipTriangleAtAxisAlignedThreshold(.5,l,Z[0].getV(),Z[1].getV(),Z[2].getV(),m),f(_,C,N,T,U,G,Z),H<et.length&&(Z[2].clone(Z[1]),Z[2].initializeFromClipResult(et,H,k),G=u.clipTriangleAtAxisAlignedThreshold(.5,l,Z[0].getV(),Z[1].getV(),Z[2].getV(),m),f(_,C,N,T,U,G,Z)))))}var tt=c?-1:0,nt=l?-1:0,rt=n.minimumHeight,it=n.maximumHeight,at=[],ot=[],ut=[],st=[],ct=Number.MAX_VALUE,lt=-ct,ht=y;ht.length=0;var ft=i.clone(n.ellipsoid),dt=n.childExtent;for(P=0;P<_.length;++P){q=_[P],b>=q?(at.push(P),q=0):q>=I?(ut.push(P),q=1):q=2*q+tt,_[P]=q,A=C[P],O>=A?(ot.push(P),A=0):A>=R?(st.push(P),A=1):A=2*A+nt,C[P]=A;var pt=s.lerp(rt,it,N[P]/d);ct>pt&&(ct=pt),pt>lt&&(lt=pt),N[P]=pt,x.longitude=s.lerp(dt.west,dt.east,q),x.latitude=s.lerp(dt.south,dt.north,A),x.height=pt,ft.cartographicToCartesian(x,v),ht.push(v.x),ht.push(v.y),ht.push(v.z)}var mt=e.fromVertices(ht,t.ZERO,3,E),yt=new a(ft),xt=yt.computeHorizonCullingPointFromVertices(mt.center,ht,3,mt.center,S),vt=lt-ct,wt=new Uint16Array(_.length+C.length+N.length);for(P=0;P<_.length;++P)wt[P]=_[P]*d;var gt=_.length;for(P=0;P<C.length;++P)wt[gt+P]=C[P]*d;for(gt+=C.length,P=0;P<N.length;++P)wt[gt+P]=d*(N[P]-ct)/vt;var Mt=new Uint16Array(T);return o.supportsTransferringArrayBuffers()&&(r.push(wt.buffer),r.push(Mt.buffer)),{vertices:wt.buffer,indices:Mt.buffer,minimumHeight:ct,maximumHeight:lt,westIndices:at,southIndices:ot,eastIndices:ut,northIndices:st,boundingSphere:mt,horizonOcclusionPoint:xt}}function h(){this.vertexBuffer=void 0,this.index=void 0,this.first=void 0,this.second=void 0,this.ratio=void 0}function f(e,t,n,i,a,o,u){if(0!==o.length){for(var s=0,c=0;c<o.length;)c=b[s++].initializeFromClipResult(o,c,u);for(var l=0;s>l;++l){var h=b[l];if(h.isIndexed())h.newIndex=a[h.index],h.uBuffer=e,h.vBuffer=t,h.heightBuffer=n;else{var f=h.getKey();if(r(a[f]))h.newIndex=a[f];else{var d=e.length;e.push(h.getU()),t.push(h.getV()),n.push(h.getH()),h.newIndex=d,a[f]=d}}}3===s?(i.push(b[0].newIndex),i.push(b[1].newIndex),i.push(b[2].newIndex)):4===s&&(i.push(b[0].newIndex),i.push(b[1].newIndex),i.push(b[2].newIndex),i.push(b[0].newIndex),i.push(b[2].newIndex),i.push(b[3].newIndex))}}var d=32767,p=[],m=[],y=[],x=new n,v=new t,w=[],g=[],M=[],z=[],S=new t,E=new e;h.prototype.clone=function(e){return r(e)||(e=new h),e.uBuffer=this.uBuffer,e.vBuffer=this.vBuffer,e.heightBuffer=this.heightBuffer,e.index=this.index,e.first=this.first,e.second=this.second,e.ratio=this.ratio,e},h.prototype.initializeIndexed=function(e,t,n,r){this.uBuffer=e,this.vBuffer=t,this.heightBuffer=n,this.index=r,this.first=void 0,this.second=void 0,this.ratio=void 0},h.prototype.initializeInterpolated=function(e,t,n){this.vertexBuffer=void 0,this.index=void 0,this.newIndex=void 0,this.first=e,this.second=t,this.ratio=n},h.prototype.initializeFromClipResult=function(e,t,n){var r=t+1;return-1!==e[t]?n[e[t]].clone(this):(this.vertexBuffer=void 0,this.index=void 0,this.first=n[e[r]],++r,this.second=n[e[r]],++r,this.ratio=e[r],++r),r},h.prototype.getKey=function(){return this.isIndexed()?this.index:JSON.stringify({first:this.first.getKey(),second:this.second.getKey(),ratio:this.ratio})},h.prototype.isIndexed=function(){return r(this.index)},h.prototype.getH=function(){return r(this.index)?this.heightBuffer[this.index]:s.lerp(this.first.getH(),this.second.getH(),this.ratio)},h.prototype.getU=function(){return r(this.index)?this.uBuffer[this.index]/d:s.lerp(this.first.getU(),this.second.getU(),this.ratio)},h.prototype.getV=function(){return r(this.index)?this.vBuffer[this.index]/d:s.lerp(this.first.getV(),this.second.getV(),this.ratio)};var b=[];return b.push(new h),b.push(new h),b.push(new h),b.push(new h),c(l)})}();